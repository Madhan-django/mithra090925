{% extends 'adminpanel/index.html' %}

{% block content %}
<div class="wlsm-main-header card col">
	<div class="school_header">
		<h1 class="h3 text-center">
			<i class="fa fa-graduation-cap text-light"></i>
			{{ skool }}
			<small class="wlsm_text_secondary">{{ year }}</small>
		</h1>
	</div>
	<div class="mt-3 text-center wlsm-section-heading-block">
		<span class="wlsm-section-heading-box">
			<span class="wlsm-section-heading">
				New Staff
			</span>
		</span>
	</div>
</div>
<div class="row">
	<div class="col-lg-6 mx-auto">
		<form method="POST" enctype="multipart/form-data">
			{% csrf_token %}
			{{ form.as_p }}

			<div class="form-group">
				<label for="id_staff_photo">Staff Photo:</label>
				{{ form.staff_photo }}
				{% if form.staff_photo.value %}
					<img id="staff_photo_preview" src="{{ form.staff_photo.value.url }}" alt="Staff photo preview">
				{% else %}
					<img id="staff_photo_preview" src="#" alt="No photo selected">
				{% endif %}
			</div>

			<div class="form-group">
				<input type="submit" class="btn btn-success" value="Add">
			</div>
		</form>
	</div>
</div>

<script>
function previewStaffPhoto() {
	const staffPhotoInput = document.querySelector('#id_staff_photo');
	const staffPhotoPreview = document.querySelector('#staff_photo_preview');

	staffPhotoInput.addEventListener('change', function() {
		const file = this.files[0];

		if (file) {
			const reader = new FileReader();

			reader.addEventListener('load', function() {
				staffPhotoPreview.setAttribute('src', this.result);
			});

			reader.readAsDataURL(file);
		} else {
			staffPhotoPreview.setAttribute('src', '#');
		}
	});
}

previewStaffPhoto();
</script>
{% endblock %}
