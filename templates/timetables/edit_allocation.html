{% extends 'panel/index.html' %}
{% block content %}
<style>
  #id_teacher_school {
    display: none;
  }
</style>
<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-title text-center">
            <br>
            <h4>Update Allocation</h4>
        </div>
        <div class="card-body">

                <form id="allocateform" data-section-url="{% url 'ajax_load_secsub' %}" method="post">
                   {% csrf_token %}
                    <div class="row g-6">
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                                {{form.teacher}}

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                               {{form.cls}}

                            </div>
                        </div>
                    </div><br>
                        <div class="row g-6">
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                               {{form.section}}

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                                {{form.subject}}

                            </div>
                        </div>
                        </div><br>
                        <div class="row g-6">
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                                 {{form.hours_per_week}}
                                <label for="id_hours_per_week">Workload per Week</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating form-floating-outline">
                                <div class="form-check form-check-primary mt-4">
                                    {{form.is_classteacher}}
                                   <label class="form-check-label" for="id_is_classteacher">&nbsp;&nbsp;&nbsp;Is Class Teacher</label>
                               </div>

                            </div>
                        </div><br>
                         {{form.teacher_school}}
                        <div class="text-end">
                              <button type="submit" class="btn btn-primary">Save</button>
                              <button type="reset" class="btn btn-secondary">Clear</button>
                        </div>
                </form>
            </div>
        </div>
    </div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $("#id_cls").change(function() {

            var url = $("#allocateform").attr("data-section-url");
            var classId = $(this).val();
            $.ajax({
                url: url,
                data: {
                    'Class_Id': classId
                },
                success: function(response) {
                    $("#id_section").html(response.sections_html);
                    $("#id_subject").html(response.subjects_html);
                }
            });
        });
    });
</script>
{% endblock %}

