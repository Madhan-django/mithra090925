{% extends 'panel/index.html' %}
{% block content %}
<style>
    h1, h3 {
        font-family: Roboto;
    }
    th {
        font-family: 'Roboto', sans-serif;
        font-weight: bold !important;
        font-size: 18px !important;
    }
    .align-right {
        display: block;
        padding-right: 30px;
        text-align: right;
    }
    #searchby {
        height: 50px;
        font-family: Roboto;
        font-size: 16px;
    }
    select{
       height:50px;
    }
    option{
      font-family:Roboto;
      font-size:18px !important;
    }
     .grid-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem; /* Adjust the gap as needed */
        align-items: center;
    }
    .form-select {
        width: 100%;
    }
    .card{
     min-height:800px;
  }
</style>
<div class="pb-0 text-center">
    <div class="flex-wrap d-flex justify-content-center align-items-center">
        <span>
            <img src="https://mithran.co.in/media/{{ skool.logo }}" alt="School Logo" width="50" height="50" style="margin-right: 10px;">
            <h1 style="display: inline-block; vertical-align: middle; margin-bottom: 0;">{{ skool }}</h1>
        </span>
    </div>
</div>

<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-title text-center">
            <br>
             <span class="badge bg-danger head-format" style="font-size: 1rem; padding: 0.5em 0.75em;">Classwise Analysis</span>
        </div>
        <div class="card-body">
<div class="col-md  text-right">
<form id="classsec" data-sect-url="{% url 'ajax_load_sect' %}" action="{% url 'student_wise_analysis' %}" method="POST">
    {% csrf_token %}
    <div class="grid-container">
        <select name="selectcls" class="form-select form-select-sm" id="id_class_name">
            <option value="">Select Class</option>
            {% for cls in clsdata %}
                <option value="{{cls.id}}">{{cls.name}}</option>
            {% endfor %}
        </select>
        <select name="secs" class="form-select form-select-sm" id="id_secs">
            <option value="">Section</option>
            {% for sc in sec %}
                {% if sel == sc %}
                    <option value="{{sc.id}}" selected="">{{sc}}</option>
                {% else %}
                    <option value="{{sc.id}}">{{sc}}</option>
                {% endif %}
            {% endfor %}
        </select>
        <div>
        <button type="submit" class="btn btn-primary btn-lg">Analyse</button>
            </div>
    </div>
</form>



<script type='text/javascript'  src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script type='text/javascript'>
    $(document).ready(function(){


 $("#id_class_name").change(function(){

    var url = $("#classsec").attr("data-sect-url");
     var classId = $(this).val();

       $.ajax({
        url: url,
        data: {
          'Class_Id': classId
        },
        success: function (data) {
          $("#id_secs").html(data);
        }
      });
         });


});

</script>
</div>
        </div>
    </div>
</div>
{% endblock %}

