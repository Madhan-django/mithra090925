{% extends 'panel/index.html' %}

{% block content %}
<style>
/* ===== Global Font ===== */
body, h1, h3, h4, h5, th, td, label, input, select, button {
    font-family: 'Roboto', sans-serif;
}

/* ===== Card Styling ===== */
.card {
    border-radius: 22px;
    box-shadow: 0px 4px 14px rgba(0,0,0,0.18);
    overflow: hidden;
    border: none;
}

/* ===== Card Title with Badge ===== */
.card-title {
    background: linear-gradient(135deg, #1a73e8, #0056d6);
    padding: 4px 0; /* smaller height */
    border-top-left-radius: 22px;
    border-top-right-radius: 22px;
    text-align: center;
    margin-bottom: 0;
}
.card-title h5 {
    margin: 0;
    font-size: 16px;
    color: #fff;
}
.card-title h5 span.badge {
    background: #fff;
    color: #000;
    padding: 3px 12px;
    font-size: 14px;
    font-weight: normal;
    border-radius: 18px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* ===== Buttons ===== */
.btn-primary {
    background: linear-gradient(135deg, #1a73e8, #0056d6);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 5px 15px;
    font-size: 13px;
}
.btn-danger {
    background: linear-gradient(135deg, #e63946, #d62839);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 5px 15px;
    font-size: 13px;
}

/* ===== Text Alignment ===== */
.text-end {
    padding : 15px;
}

/* ===== Table Styling ===== */
.table {
    border-radius: 12px;
    overflow: hidden;
    border-collapse: collapse; /* remove spacing between cells */
}
.table th, .table td {
    vertical-align: middle !important;
    text-align: center;
    font-size: 13px;
    padding: 2px 6px; /* smaller padding */
}

/* ===== Table Header ===== */
.table-dark th {
    background-color: #212529 !important;
    color: #fff;
    line-height: 1;       /* tighter line-height */
    padding: 10px 4px !important; /* very small padding */
    font-size: 14px;
    white-space: nowrap;  /* prevent wrapping */
}

/* ===== Table Cells ===== */
.table td {
    padding: 12px 4px !important;
    font-size: 14px;
}
</style>

<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <!-- Card Title -->
        <div class="card-title text-center">
            <h5 class="mb-0">
                <span class="badge">Cash Register</span>
            </h5>
        </div>

        <!-- Action Button -->
        <div class="text-end">
            <a href="{% url 'newcashsource' %}" class="btn btn-sm btn-primary">New Cash Source</a>
        </div>

        <!-- Table -->
        <div class="card-body">
            <table class="table">
                <thead class="table-dark">
                    <tr>
                        <th>Date</th>
                        <th>Source</th>
                        <th>Amount</th>
                        <th>Received By</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% if data %}
                        {% for source in data %}
                        <tr>
                            <td>{{source.date_received}}</td>
                            <td>{{source.source_name}}</td>
                            <td>{{source.amount}}</td>
                            <td>{{source.received_by}}</td>
                            <td>
                                <form action="#" method="" class="d-inline">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-primary btn-sm">Edit</button>
                                </form>
                                {% if request.user.groups.all.0.name == "admin" or request.user.groups.all.0.name == "superadmin" %}
                                <form action="#" method="" class="d-inline">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                </form>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="5">
                                <div class="alert alert-danger" role="alert">
                                    No Record are available to Show
                                </div>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
