{% extends 'panel/index.html' %}

{% block content %}
<style>

/* ===== GLOBAL FONT ===== */
body, h1, h3, h5, th, td, label, button {
    font-family: 'Roboto', sans-serif;
}

/* ===== CARD ===== */
.card {
    border-radius: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.10);
    padding-bottom: 15px;
}

/* ===== TITLE BAR (Gradient + Badge) ===== */
.card-title {
    background: linear-gradient(90deg, #005C97, #363795);
    padding: 4px  !important;
    border-radius: 20px 20px 0 0;
}

.card-title h5 {
    margin: 0;
    font-size: 17px;                  /* reduced */
    font-weight: 500;

}

.card-title span.badge {
    background: #f8f9fa;
    color: #000;
    font-size: 13px;                  /* reduced badge font */
    padding: 4px 20px;                /* reduced badge padding */
    border-radius: 6px;
}


/* ===== NEW EXAM BUTTON AREA ===== */
.text-end {
    padding-right: 20px;
}

/* ===== TABLE ===== */
.table {
    border-radius: 10px;
    overflow: hidden;
    margin-top: 2px;
}

/* ===== TABLE HEADER (Compact & Clean) ===== */
.table-dark th {
    background-color: #212529 !important;
    color: #fff !important;
    padding-top: 6px !important;    /* reduced top padding */
    padding-bottom: 6px !important; /* reduced bottom padding */
    font-size: 14px !important;
    vertical-align: middle;
    text-align: center;
}

/* ===== TABLE DATA ===== */
td {
    font-size: 14px !important;    /* reduced to match timetable style */
    padding: 10px 8px !important;  /* compact row height */
    vertical-align: middle;
    font-family: 'Roboto', sans-serif;
}

/* Align dropdown icon properly */
.dropdown-toggle {
    border: none;
}


</style>


<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">

        <!-- MAIN TITLE WITH BADGE -->
        <div class="card-title text-center">
            <span class="badge bg-light text-dark">Book List</span>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="text-end">
            <a href="{% url 'add_book' %}" class="btn btn-sm btn-primary">New Book</a>
            <a href="#" class="btn btn-sm btn-success">Export PDF</a>
            <a href="#" class="btn btn-sm btn-warning">Export CSV</a>
        </div>

        <br>

        {% if data %}
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Subject</th>
                    <th>Rack Number</th>
                    <th>Book Number</th>
                    <th>ISBN Number</th>
                    <th>Price</th>
                    <th>Qty / Issued</th>
                    <th>Issue Book</th>
                </tr>
            </thead>

            <tbody>
            {% for libbook in data %}
                <tr>
                    <td>{{ libbook.title }}</td>
                    <td>{{ libbook.author }}</td>
                    <td>{{ libbook.subject }}</td>
                    <td>{{ libbook.rack }}</td>
                    <td>{{ libbook.book_no }}</td>
                    <td>{{ libbook.isbn }}</td>
                    <td>{{ libbook.price }}</td>
                    <td>Qty: {{ libbook.quantity }} | Issued: {{ libbook.issued }}</td>

                    <td>
                        {% if libbook.quantity > libbook.issued %}
                        <form action="{% url 'add_book_issued' libbook.id %}" method="post" >
                            {% csrf_token %}
                            <button type="submit" class="btn btn-info btn-sm">
                                        Issue Book
                                    </button>

                        </form>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% else %}
            <div class="alert alert-danger m-4" role="alert">
                No Records Available to Show
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}
